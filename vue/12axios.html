<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>12axios | Vue基础课程</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.533636f2.css" as="style"><link rel="preload" href="/assets/js/app.1e20b0dd.js" as="script"><link rel="preload" href="/assets/js/2.01302ed6.js" as="script"><link rel="preload" href="/assets/js/17.12b06441.js" as="script"><link rel="prefetch" href="/assets/js/10.1be43c5a.js"><link rel="prefetch" href="/assets/js/11.83dea3fc.js"><link rel="prefetch" href="/assets/js/12.4f3aded7.js"><link rel="prefetch" href="/assets/js/13.3fc1322d.js"><link rel="prefetch" href="/assets/js/14.579367cc.js"><link rel="prefetch" href="/assets/js/15.14763da5.js"><link rel="prefetch" href="/assets/js/16.33d8f928.js"><link rel="prefetch" href="/assets/js/18.96ef931a.js"><link rel="prefetch" href="/assets/js/19.611bb5ed.js"><link rel="prefetch" href="/assets/js/20.20508e85.js"><link rel="prefetch" href="/assets/js/21.7e6beb81.js"><link rel="prefetch" href="/assets/js/22.8ae1a2ae.js"><link rel="prefetch" href="/assets/js/23.5dab8886.js"><link rel="prefetch" href="/assets/js/24.5f63462d.js"><link rel="prefetch" href="/assets/js/25.bc6fb3bc.js"><link rel="prefetch" href="/assets/js/26.ff8e2ce8.js"><link rel="prefetch" href="/assets/js/27.17e49bf6.js"><link rel="prefetch" href="/assets/js/28.8606f290.js"><link rel="prefetch" href="/assets/js/29.68665670.js"><link rel="prefetch" href="/assets/js/3.e4bc0eb8.js"><link rel="prefetch" href="/assets/js/30.92053faf.js"><link rel="prefetch" href="/assets/js/31.0262ef9d.js"><link rel="prefetch" href="/assets/js/32.d6b39673.js"><link rel="prefetch" href="/assets/js/33.7f00622c.js"><link rel="prefetch" href="/assets/js/34.7159f2a3.js"><link rel="prefetch" href="/assets/js/4.f04df7cd.js"><link rel="prefetch" href="/assets/js/5.e9f033da.js"><link rel="prefetch" href="/assets/js/6.d9aded3e.js"><link rel="prefetch" href="/assets/js/7.21e13b72.js"><link rel="prefetch" href="/assets/js/8.5f477c68.js"><link rel="prefetch" href="/assets/js/9.5e988fc0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.533636f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vue基础课程</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/frontEnd/" class="nav-link">前端规范</a></div><div class="nav-item"><a href="/development/" class="nav-link">开发环境</a></div><div class="nav-item"><a href="/notes/" class="nav-link">学习文档</a></div><div class="nav-item"><a href="https://www.iyouhun.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  游魂博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese.html" class="nav-link">Chinese</a></li><li class="dropdown-item"><!----> <a href="/language/English.html" class="nav-link">English</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/frontEnd/" class="nav-link">前端规范</a></div><div class="nav-item"><a href="/development/" class="nav-link">开发环境</a></div><div class="nav-item"><a href="/notes/" class="nav-link">学习文档</a></div><div class="nav-item"><a href="https://www.iyouhun.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  游魂博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/language/chinese.html" class="nav-link">Chinese</a></li><li class="dropdown-item"><!----> <a href="/language/English.html" class="nav-link">English</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vue/01课程介绍.html" class="sidebar-link">01课程介绍</a></li><li><a href="/vue/02vue介绍.html" class="sidebar-link">02vue介绍</a></li><li><a href="/vue/03相关指令.html" class="sidebar-link">03相关指令</a></li><li><a href="/vue/04品牌管理案例.html" class="sidebar-link">04品牌列表案例</a></li><li><a href="/vue/05computed计算属性.html" class="sidebar-link">05computed计算属性</a></li><li><a href="/vue/06过滤器.html" class="sidebar-link">06过滤器</a></li><li><a href="/vue/07按键修饰符.html" class="sidebar-link">07按键修饰符</a></li><li><a href="/vue/08自定义指令.html" class="sidebar-link">08自定义指令</a></li><li><a href="/vue/09vue扩展.html" class="sidebar-link">09vue扩展</a></li><li><a href="/vue/10vue生命周期.html" class="sidebar-link">10vue生命周期</a></li><li><a href="/vue/11Promise.html" class="sidebar-link">11Promise</a></li><li><a href="/vue/12axios.html" class="active sidebar-link">12axios</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/12axios.html#下载" class="sidebar-link">下载</a></li><li class="sidebar-sub-header"><a href="/vue/12axios.html#设置服务器端" class="sidebar-link">设置服务器端</a></li><li class="sidebar-sub-header"><a href="/vue/12axios.html#使用axios" class="sidebar-link">使用axios</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/12axios.html#get请求语法" class="sidebar-link">get请求语法</a></li><li class="sidebar-sub-header"><a href="/vue/12axios.html#post请求语法" class="sidebar-link">post请求语法</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue/12axios.html#axios配置" class="sidebar-link">axios配置</a></li><li class="sidebar-sub-header"><a href="/vue/12axios.html#axios拦截器interceptors" class="sidebar-link">axios拦截器interceptors</a></li><li class="sidebar-sub-header"><a href="/vue/12axios.html#等待案例" class="sidebar-link">等待案例</a></li><li class="sidebar-sub-header"><a href="/vue/12axios.html#小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/vue/13品牌管理案例升级.html" class="sidebar-link">13品牌管理案例升级</a></li><li><a href="/vue/14vue-devtools的安装使用.html" class="sidebar-link">14vue-devtools的安装使用</a></li><li><a href="/vue/15ES6模块化.html" class="sidebar-link">15ES6模块化</a></li><li><a href="/vue/16VueCLI.html" class="sidebar-link">16VueCLI</a></li><li><a href="/vue/17组件.html" class="sidebar-link">17组件</a></li><li><a href="/vue/18vue单文件组件.html" class="sidebar-link">18vue单文件组件</a></li><li><a href="/vue/19SPA.html" class="sidebar-link">19SPA</a></li><li><a href="/vue/20路由router.html" class="sidebar-link">20路由router</a></li><li><a href="/vue/21WebStorage技术.html" class="sidebar-link">21WebStorage技术</a></li><li><a href="/vue/22用户登录案例.html" class="sidebar-link">22用户登录案例</a></li><li><a href="/vue/23watch监听器.html" class="sidebar-link">23watch监听器</a></li><li><a href="/vue/24ESLint代码规范检查.html" class="sidebar-link">24ESLint代码规范检查</a></li><li><a href="/vue/25ElementUI.html" class="sidebar-link">25ElementUI</a></li><li><a href="/vue/26相关资源.html" class="sidebar-link">26相关资源</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_12axios"><a href="#_12axios" aria-hidden="true" class="header-anchor">#</a> 12axios</h1> <p>axios是对ajax的封装</p> <ol><li><p>之前的学习中，如何发起数据请求？</p> <p>最原生的new XMLHttpRequest 对象发起Ajax请求(open send onreadystatechange  readyState responseText)</p> <p>使用jQuery中提供的工具函数</p> <p>​	$.ajax({配置对象})</p> <p>​	$.post(url地址, function(){})</p> <p>​	$.get(url地址, function(){})</p></li> <li><p>现在用更高端的 axios 来发起Ajax请求</p> <p>可以支持 get 和 post 等请求，但是无法发起 JSONP 请求，如果涉及到 JSONP 请求，可以让后端启用 cors 跨域资源共享即可</p> <blockquote><p>jQuery的ajax当然也可以使用，但这样就不得不接受除ajax以外的代码部分，整体考虑不划算</p></blockquote></li></ol> <h2 id="下载"><a href="#下载" aria-hidden="true" class="header-anchor">#</a> 下载</h2> <p>axios参考网址：
https://www.npmjs.com/package/axios</p> <p><img src="/img/2-aaa.png" alt=""></p> <ol><li><p>单独文件下载</p> <p>浏览器访问如下地址，把获取的内容通过单独的文件存储起来</p> <div class="language- extra-class"><pre class="language-text"><code>https://unpkg.com/axios/dist/axios.min.js
</code></pre></div></li> <li><p>cdn方式：</p> <p>在应用文件中通过如下方式引入axios，要求具备上网环境</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;
</code></pre></div></li> <li><p>npm方式：</p> <div class="language- extra-class"><pre class="language-text"><code>npm install axios
</code></pre></div></li></ol> <h2 id="设置服务器端"><a href="#设置服务器端" aria-hidden="true" class="header-anchor">#</a> 设置服务器端</h2> <p><img src="/img/2-bbb.png" alt=""></p> <p>项目运行中：</p> <ul><li>客户端负责数据的<strong>展示</strong></li> <li>服务器端负责数据的<strong>提供</strong></li> <li>axios是<font color="red">搬运工</font>，负责在 客户端 和 服务器端 传输数据</li></ul> <p>为了使得学习效果更好，现在统一设置<code>后端项目</code></p> <p>步骤：</p> <ol><li><p>把server后端项目压缩包解压缩出来</p></li> <li><p>启动mysql数据库</p></li> <li><p>创建目标数据库</p></li> <li><p>给数据库导入数据</p></li> <li><p>给项目安装依赖包  npm install</p></li> <li><p>给项目配置账号、数据库名称和密码(修改src/app.js文件)</p></li> <li><p>运行项目   node app.js</p></li> <li><p>把后端的全部代码文件解压到桌面指定目录</p> <p><img src="/img/1561016785365.png" alt="1561016785365"></p></li> <li><p>启动mysql</p> <p><img src="/img/2-1554629441784.png" alt="1554629441784"></p></li> <li><p>创建数据库相关</p> <p>新建数据库：</p> <p><img src="/img/1561016897179.png" alt="1561016897179"></p> <p>给数据库导入数据：</p> <p><img src="/img/1561016973984.png" alt="1561016973984"></p> <p><img src="/img/1561016949657.png" alt="1561016949657"></p> <p>数据导入成功：</p> <p><img src="/img/1561017013901.png" alt="1561017013901"></p></li> <li><p>给项目配置数据库信息</p> <p>在src/app.js文件中根据实际情况配置 数据库用户名、密码、数据库名称</p> <p><img src="/img/1561017218181.png" alt="1561017218181"></p></li> <li><p>给项目安装全部依赖包</p> <p>在<strong>server</strong>目录下运行 npm install</p> <div class="language- extra-class"><pre class="language-text"><code>npm install
</code></pre></div><p><img src="/img/1561017337257.png" alt="1561017337257"></p></li> <li><p>运行项目</p> <p>在server/src目录下运行 node app.js</p> <div class="language- extra-class"><pre class="language-text"><code>node app.js
</code></pre></div><p><img src="/img/1561017520017.png" alt="1561017520017"></p></li> <li><p>浏览器运行效果：</p></li></ol> <p><img src="/img/2-1554630006862.png" alt="1554630006862"></p> <h2 id="使用axios"><a href="#使用axios" aria-hidden="true" class="header-anchor">#</a> 使用axios</h2> <h3 id="get请求语法"><a href="#get请求语法" aria-hidden="true" class="header-anchor">#</a> get请求语法</h3> <p>语法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>地址<span class="token punctuation">,</span><span class="token punctuation">{</span>params<span class="token punctuation">:</span><span class="token punctuation">{</span>被传递的数据<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>如果需要给服务器传递参数，就需要借助params成员</p></blockquote> <h3 id="post请求语法"><a href="#post请求语法" aria-hidden="true" class="header-anchor">#</a> post请求语法</h3> <div class="language- extra-class"><pre class="language-text"><code>const result = axios.post(地址,{被传递的数据})
</code></pre></div><blockquote><p>如果需要给服务端传递参数，可以借助post方法的第二个参数，被传递的参数要求是 对象 格式</p></blockquote> <p>注意：</p> <p>axios调用全部方法返回的结果都是Promise对象，本身可以再调用then或catch方法做进一步处理</p> <h2 id="axios配置"><a href="#axios配置" aria-hidden="true" class="header-anchor">#</a> axios配置</h2> <p>1.把axios配置成为Vue的一个<a href="">子成员</a>，每次都通过Vue触发调用，以便Vue主角可以控制一切</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$http <span class="token operator">=</span> axios			<span class="token comment">// 配置</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>				   <span class="token comment">// 使用</span>
</code></pre></div><blockquote><p><code>$http</code>是vue指向axios的成员名称，可以自定义为其它</p></blockquote> <p>2.给axios设置请求<a href="">公共根地址</a>，这样可以减少重复代码编写，提升项目开发效率 、 增强维护性</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'根地址'</span>
</code></pre></div><h2 id="axios拦截器interceptors"><a href="#axios拦截器interceptors" aria-hidden="true" class="header-anchor">#</a> axios拦截器interceptors</h2> <p><img src="/img/2-4-333.png" alt=""></p> <p>axios在客户端与服务端之间传递数据时候是有时间消耗的</p> <p>网络好、服务器比较空闲，axios的执行速度快</p> <p>网络不好、服务器比较繁忙，axios的执行速度慢(这时用户需要多等待)</p> <p>axios无论执行速度快还是慢，用户都需要等待，如果在axios执行过程中页面给予一定的提示，那么用户体验就比较好，这时候<a href="">拦截器</a>就可以应用上</p> <p><img src="/img/2-4-444.png" alt=""></p> <p>axios本身有两种拦截器：<a href="">请求拦截</a>、<a href="">响应拦截</a></p> <ul><li>请求拦截器：</li></ul> <p>​	axios每次<font color="red">开始</font>请求的时候先执行此处逻辑，在这个地方可以给axios做出发前的配置，也可以做出发前的检查工作，检查ok的情况下就开始向服务器端发请求</p> <ul><li>响应拦截器：</li></ul> <p>​	axios<font color="red">完成</font>与服务器端交互回到客户端后就执行此处逻辑，在这个地方可以做一些后续收尾事宜，例如axios每次请求是否成功的判断处理</p> <p>请求拦截器</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// axios请求前的逻辑处理</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>config 代表axios请求的配置对象，后期可以借此给axios做相关配置</p></blockquote> <p>响应拦截器</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// axios完整请求的后续逻辑处理</span>
  <span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something with response error</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>response代表服务器端给axios返回的信息，可以做响应完毕的后续处理工作</p></blockquote> <h2 id="等待案例"><a href="#等待案例" aria-hidden="true" class="header-anchor">#</a> 等待案例</h2> <p>为了使得用户体验更好，在进行axios请求过程中要求提示等待效果</p> <p>实现：发送axios请求的时候<strong>显示</strong>等待图片，完成请求就<strong>隐藏</strong>等待图片</p> <p>步骤：</p> <ol><li><p>把loading.gif图片放到应用目录，并通过img标签做应用，同时通过v-show实现img标签的显示和隐藏效果</p></li> <li><p>在Vue的data成员中设置flag标志</p></li> <li><p>在created生命周期中设置请求、响应拦截器，做flag布尔值的切换操作</p> <p>(预想：在请求拦截器中设置flag=true，在相应拦截器中设置flag=false,效果即呈现)</p></li></ol> <p>涉及技术点：</p> <p>最好使用v-show，因为等待效果的切换比较频繁，用v-show更节省资源</p> <h2 id="小结"><a href="#小结" aria-hidden="true" class="header-anchor">#</a> 小结</h2> <ol><li>axios所有请求的返回结果都可以通过  <strong>async/await</strong>  修饰</li> <li><strong>对象解构赋值</strong> 使得对象中的个别成员可以单独拆分出来独立使用</li> <li>axios的请求<strong>公共前缀地址</strong>可以做统一配置，使得相同的部分只维护一份，提升开发效率</li> <li>axios可以配置为Vue的成员，使得应用风格统一</li></ol> <ul><li>axios的拦截器为了可以操控Vue实例的data数据，需要设置到created生命周期方法中，在该方法中data数据已经准备好了</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/vue/11Promise.html" class="prev">
          11Promise
        </a></span> <span class="next"><a href="/vue/13品牌管理案例升级.html">
          13品牌管理案例升级
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1e20b0dd.js" defer></script><script src="/assets/js/2.01302ed6.js" defer></script><script src="/assets/js/17.12b06441.js" defer></script>
  </body>
</html>
